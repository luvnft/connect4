<!doctype html><html lang=en><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name=viewport><title>connect4.xyz</title><script type=module>import init, { new_game, nostr_login, guest_login } from './connect4xyz-e9a86a6b76ef0cfc.js'; init('./connect4xyz-e9a86a6b76ef0cfc_bg.wasm'); document.addEventListener('DOMContentLoaded', () => { document.getElementById('NewGameButton').addEventListener('click', () => { new_game(); }); document.getElementById('NostrLogin').addEventListener('click', async e => { e.preventDefault(); let nostr = await window.nostr; nostr ? nostr_login(await window.nostr.getPublicKey()) : alert('Please install a Nostr extension.'); }); document.getElementById('GuestLogin').addEventListener('click', () => { guest_login(); }); });</script><link href=./favicon-62f8607a7e9954c.ico integrity=sha384-vRtMBXgD1hNxxhineEpgcLDnlUNIk3AGT2GbjTSNeh0B2Eecd2g7Qb_timlQOfyx rel=icon><script async defer src=https://buttons.github.io/buttons.js></script><style>body,html{width:100%;height:100%;margin:0;padding:0;overflow:hidden}.header-container{flex-direction:column;align-items:center;gap:10px;display:flex;position:absolute;top:5%;left:50%;transform:translate(-50%)}#titleHeader{margin:0;font-size:15px;display:flex;position:absolute;top:1%;left:50%;transform:translate(-50%)}.container{background-color:#fffc;border-radius:10px;flex-direction:row;justify-content:center;gap:10px;padding:10px;display:flex;box-shadow:0 2px 10px #0003}.top-buttons-container{justify-content:center;gap:10px;display:flex;position:absolute;top:10px;left:40%;transform:translate(-50%)}#homeButton,#aboutButton{cursor:pointer;touch-action:manipulation;background-color:#fffc;border:none;font-size:16px}@media (width<=800px){.top-buttons-container{top:10px;left:15%;transform:translate(-50%)}}.dropdown-content{z-index:1;background-color:#f9f9f9;min-width:160px;padding:12px 16px;display:none;position:absolute;top:40px;left:40%;box-shadow:0 8px 16px #0003}@media (width<=800px){.dropdown-content{z-index:1;background-color:#f9f9f9;min-width:160px;padding:12px 16px;display:none;position:absolute;top:40px;left:5%;box-shadow:0 8px 16px #0003}}.github-container{justify-content:center;display:flex;position:absolute;top:10px;left:60%;transform:translate(-50%)}@media (width<=800px){.github-container{top:10px;left:90%;transform:translate(-50%)}}#UrlContainer{flex-direction:column;align-items:flex-start;padding:10px;display:flex}#NostrLogin{display:none}</style><link as=fetch crossorigin href=./connect4xyz-e9a86a6b76ef0cfc_bg.wasm integrity=sha384-uf5tn2bKDGKtNc-crHyd0a0Yg8M0BwZlgo-utbr0S4Koep92rSAAT3g40GGLAcKI rel=preload type=application/wasm><link crossorigin href=./connect4xyz-e9a86a6b76ef0cfc.js integrity=sha384-2VUDEbhwMMfMpDtHRCOjZzZa9oSlbnrGG7v9W0d8jOt-LEoVuRyN7kcawzb4yPy3 rel=modulepreload></head><body><div class=header-container><div class=container id=LoadingContainer><div id=loadingText>Loading...</div></div><div class=container id=LoginContainer><button id=NostrLogin>login with nostr<br>(desktop)</button><button id=GuestLogin>login as guest</button></div><div class=container id=NewGameContainer><button id=NewGameButton>Create Game 🎲</button></div><div class=container id=UrlContainer><span id=url></span><div><button id=copyButton onclick=copyToClipboard()>Share this URL to play 📋</button></div></div><div class=container id=ShareContainer><button id=copyBoardButton onclick=copyBoardStateToClipboard()>Share result 📋</button></div></div><h1 id=titleHeader>connect4 over nostr</h1><div class=top-buttons-container><button id=homeButton>🏠</button><button id=aboutButton>ℹ️</button></div><div class=github-container><a aria-label="Star stum0/connect4xyz on GitHub" class=github-button data-show-count=true href=https://github.com/stum0/connect4xyz></a></div><div class=dropdown-content id=aboutContent>censorship resistant connect4 over the <a href=https://nostr.com target=_blank>nostr</a> network<br><br> no one can ever stop you playing connect4 ever again!<br><br> relays:<br> wss://nostr.zbd.gg<br> wss://relay.nostrss.re<br> wss://nostr.lu.ke<br> wss://relay.damus.io</div><script>var copyToClipboard=(()=>{let a=`copyButton`;navigator.clipboard.writeText(window.location.href).then(()=>{const b=document.getElementById(a);b.textContent=`Copied URL!`;setTimeout(()=>{b.textContent=`Share this URL to play 📋`},3000)}).catch(b=>{console.error(`Failed to copy board state:`,b);document.getElementById(a).textContent=`Failed to copy! ❌`})});var createConnectFourGrid=(a=>{let h=0,i=1,g=Array;const b=JSON.parse(a);const c=6;const d=7;let e=new g(c);for(let a=h;a<c;a++){e[a]=new g(d).fill(h)};b.forEach(a=>{if(e[a.row][a.column]===h){e[a.row][a.column]=a.player}});let f=`I won at connect4.xyz\\n\\n`;for(let a=c- i;a>=h;a--){for(let b=h;b<d;b++){if(e[a][b]===i){f+=`🔴`}else if(e[a][b]===2){f+=`🟡`}else{f+=`⚪`}};f+=`\\n`};return f});var copyBoardStateToClipboard=(()=>{let a=`copyBoardButton`;navigator.clipboard.writeText(currentBoardState).then(()=>{const b=document.getElementById(a);b.textContent=`Copied! 🎉`;setTimeout(()=>{b.textContent=`Share result 📋`},3000)}).catch(b=>{console.error(`Failed to copy board state:`,b);document.getElementById(a).textContent=`Failed to copy! ❌`})});var hideNewGameButton=(()=>{document.getElementById(`NewGameContainer`).style.display=`none`});var showCopyBoardButton=(()=>{document.getElementById(`ShareContainer`).style.display=`flex`});var hideCopyButton=(()=>{document.getElementById(`UrlContainer`).style.display=`none`});var hideLoginButton=(()=>{document.getElementById(`LoginContainer`).style.display=`none`});var showLoginButton=(()=>{document.getElementById(`LoginContainer`).style.display=`flex`});var displayShareButton=(()=>{const a=window.location.href;const b=window.location.pathname;document.getElementById(`url`).textContent=a;document.getElementById(`UrlContainer`).style.display=`flex`});var hideLoading=(()=>{document.getElementById(`LoadingContainer`).style.display=`none`});var hideButtons=(()=>{let a=`none`;document.getElementById(`LoginContainer`).style.display=a;document.getElementById(`ShareContainer`).style.display=a;document.getElementById(`NewGameContainer`).style.display=a;document.getElementById(`UrlContainer`).style.display=a});var showNewGameButton=(()=>{document.getElementById(`NewGameContainer`).style.display=`flex`});var goToGitHub=(()=>{window.location.href=`https://github.com/stum0/connect4xyz`});hideButtons();let currentBoardState=``;document.getElementById(`homeButton`).addEventListener(`click`,(()=>{window.location.href=window.location.origin}));document.getElementById(`url`).textContent=window.location.href;document.addEventListener(`click`,(()=>{var a=document.getElementById(`aboutContent`);if(a.style.display===`block`){a.style.display=`none`}}));window.addEventListener(`urlChanged`,()=>{displayShareButton()});window.addEventListener(`wasmLoaded`,()=>{hideLoading();showLoginButton()});window.addEventListener(`loggedIn`,()=>{showNewGameButton();hideLoginButton()});window.addEventListener(`send_board`,a=>{const b=a.detail;currentBoardState=createConnectFourGrid(b);showCopyBoardButton()});document.getElementById(`aboutButton`).addEventListener(`click`,(a=>{let c=`block`;var b=document.getElementById(`aboutContent`);b.style.display=b.style.display===c?`none`:c;a.stopPropagation()}))</script></body></html>